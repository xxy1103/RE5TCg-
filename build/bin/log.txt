[2025-06-20 12:39:04] [INFO] [main.c:25] 正在启动DNS代理服务器...
[2025-06-20 12:39:04] [DEBUG] [dnsServer.c:49] 初始化映射表 (id最大值为: 1000)
[2025-06-20 12:39:04] [DEBUG] [dnsServer.c:59] SOCKET 创建成功
[2025-06-20 12:39:04] [DEBUG] [dnsServer.c:67] 设置socket非阻塞成功
[2025-06-20 12:39:04] [INFO] [dnsServer.c:86] DNS服务成功运行，正在监听端口： 53...
[2025-06-20 12:39:04] [INFO] [dnsServer.c:87] 准备处理并发DNS请求（使用select()事件循环）
[2025-06-20 12:39:05] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:39:16] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:39:27] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:39:38] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:39:49] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:40:00] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:40:11] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:40:21] [DEBUG] [dnsServer.c:260] 收到来自 127.0.0.1:44522 的DNS请求 (34 字节)
[2025-06-20 12:40:21] [DEBUG] [dnsServer.c:265] === DNS Message ===
Transaction ID: 0x2EFF (12031)
Flags: 0x0100
  QR: 0 (Query)
  Opcode: 0
  AA: 0 (Authoritative Answer)
  TC: 0 (Truncated)
  RD: 1 (Recursion Desired)
  RA: 0 (Recursion Available)
  RCODE: 0

=== Counts ===
Questions: 1
Answers: 0
Authority Records: 0
Additional Records: 0

=== Questions ===
Question 1:
  Name: blog.ulna520.top
  Type: 1 (A)
  Class: 1 (IN)

=== End of DNS Message ===

[2025-06-20 12:40:21] [DEBUG] [dnsServer.c:266] 原始ID: 12031
[2025-06-20 12:40:21] [DEBUG] [idmapping.c:56] 添加映射: 原始ID=12031 -> 新ID=1 (槽位 0, 总数: 1)
[2025-06-20 12:40:21] [DEBUG] [dnsServer.c:291] 修改请求ID: 12031 -> 1
[2025-06-20 12:40:21] [DEBUG] [dnsServer.c:299] 成功转发请求，上游ID=1
[2025-06-20 12:40:21] [DEBUG] [dnsServer.c:232] 本批次已处理 1 个客户端请求
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=1, 运行时间=10 秒
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:334] 正在处理上游ID为 1 的响应
[2025-06-20 12:40:22] [DEBUG] [idmapping.c:82] 找到新ID=1 的映射，位于槽位 0
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:358] 恢复响应ID: 1 -> 12031，目标客户端 127.0.0.1:44522
[2025-06-20 12:40:22] [INFO] [dnsServer.c:370] 已向客户端 127.0.0.1:44522 发送响应 (66 字节，原始ID=12031)
[2025-06-20 12:40:22] [DEBUG] [idmapping.c:112] 移除映射: 新ID=1，槽位 0 (剩余: 0)
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:232] 本批次已处理 1 个客户端请求
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:260] 收到来自 127.0.0.1:41297 的DNS请求 (34 字节)
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:265] === DNS Message ===
Transaction ID: 0xCE3E (52798)
Flags: 0x0100
  QR: 0 (Query)
  Opcode: 0
  AA: 0 (Authoritative Answer)
  TC: 0 (Truncated)
  RD: 1 (Recursion Desired)
  RA: 0 (Recursion Available)
  RCODE: 0

=== Counts ===
Questions: 1
Answers: 0
Authority Records: 0
Additional Records: 0

=== Questions ===
Question 1:
  Name: blog.ulna520.top
  Type: 28 (AAAA)
  Class: 1 (IN)

=== End of DNS Message ===

[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:266] 原始ID: 52798
[2025-06-20 12:40:22] [DEBUG] [idmapping.c:56] 添加映射: 原始ID=52798 -> 新ID=2 (槽位 0, 总数: 1)
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:291] 修改请求ID: 52798 -> 2
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:299] 成功转发请求，上游ID=2
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:232] 本批次已处理 1 个客户端请求
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:334] 正在处理上游ID为 2 的响应
[2025-06-20 12:40:22] [DEBUG] [idmapping.c:82] 找到新ID=2 的映射，位于槽位 0
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:358] 恢复响应ID: 2 -> 52798，目标客户端 127.0.0.1:41297
[2025-06-20 12:40:22] [INFO] [dnsServer.c:370] 已向客户端 127.0.0.1:41297 发送响应 (90 字节，原始ID=52798)
[2025-06-20 12:40:22] [DEBUG] [idmapping.c:112] 移除映射: 新ID=2，槽位 0 (剩余: 0)
[2025-06-20 12:40:22] [DEBUG] [dnsServer.c:232] 本批次已处理 1 个客户端请求
[2025-06-20 12:40:33] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:40:44] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:40:55] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:41:06] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:41:17] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
[2025-06-20 12:41:28] [DEBUG] [dnsServer.c:150] 服务器状态: 活跃映射数=0, 运行时间=10 秒
